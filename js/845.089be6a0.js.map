{"version":3,"file":"js/845.089be6a0.js","mappings":"wMAKA,SAASA,EAAaC,GAClB,OAAOC,EAAAA,EAAAA,KAASC,IAAK,kBAAiBF,KAG1C,SAASG,EAAkBC,GACvB,OAAOH,EAAAA,EAAAA,KAASC,IAAK,mBAAkBE,U,8MCe3C,MAAMC,EAAQ,qBAERC,EAAQ,6DAA4DD,kBAAsBE,mBAC5FC,SAASC,yEAIPC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,KACd,IAAI,KAAEC,IAASC,EAAAA,EAAAA,IAAYH,G,OAC3BI,QAAQC,IAAIH,IAGZI,EAAAA,EAAAA,KAAU,KACN,GAAIC,SAASX,SAASY,OAAQ,CAC1B,IAAIpB,EAAOmB,SAASX,SAASY,OAC7BpB,EAAOA,EAAKqB,MAAM,KAAK,GACvBL,QAAQC,IAAI,SAAUjB,GACtBD,EAAaC,GACRsB,MAAMC,IACHP,QAAQC,IAAI,sBAAuBM,GACnCC,aAAaC,QAAQ,QAASC,KAAKC,UAAUJ,EAAIK,KAAKC,cACtD1B,EAAkBoB,EAAIK,KAAKxB,QAAQkB,MAAMC,IACrCT,EAAOS,EAAIK,KAAKE,gBAChBlB,EAAME,KAAOA,EACZA,EAAKiB,MAAMC,OAQNtB,EAAOuB,KAAK,CACRC,KAAM,YARVxB,EAAOuB,KAAK,CACRC,KAAM,UACNC,OAAQ,CACJC,KAAM,OACNC,GAAI,WAQzBC,OAAOC,IACJvB,QAAQC,IAAIsB,U,oKC1D5B,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://omp/./src/service/index.js","webpack://omp/./src/views/HomeView.vue","webpack://omp/./src/views/HomeView.vue?4c5b"],"sourcesContent":["import { $admin } from \"./axios.js\";\n\nfunction getUserInfo(params) {\n    return $admin().get(`/api/Work/userInfo`, params);\n}\nfunction getUserLogin(code) {\n    return $admin().get(`/api/Work/login${code}`);\n}\n\nfunction getUserPermission(userId) {\n    return $admin().get(`/api/Manage/uer/${userId}/role`);\n}\n\nexport { getUserLogin, getUserInfo, getUserPermission };\n","<!--\n * @Description: \n * @Author: litthy\n * @Date: 2022-07-08 13:59:49\n * @LastEditTime: 2022-07-15 14:31:21\n * @LastEditors: litthy\n * @Reference: \n-->\n<template>\n    <div class=\"v-home\">\n        <img class=\"logo\" :src=\"Logo\" alt=\"深莓智能\" />\n        <span class=\"title\">深莓智能运营管理平台</span>\n        <a :href=\"path\" class=\"button\">点击进入</a>\n    </div>\n</template>\n\n<script setup>\nimport Logo from \"@deepberry/common/img/logo.svg\";\nimport { onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { getUserLogin, getUserPermission } from \"@/service/index.js\";\nimport { storeToRefs } from \"pinia\";\nimport { deepBerryStore } from \"@/store/index\";\n\n// 跳转链接数据\nconst APPID = \"ww5429d07e97752284\";\n// const REDIRECT_URI = encodeURI(\"https://admin.deepberry.cn/omp\");\nconst path = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${APPID}&redirect_uri=${encodeURIComponent(\n    location.href\n)}&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect`;\n\n//====== 数据 ======\nconst router = useRouter();\nconst store = deepBerryStore();\nlet { role } = storeToRefs(store);\nconsole.log(role);\n\n// 跳转链接数据\nonMounted(() => {\n    if (document.location.search) {\n        let code = document.location.search;\n        code = code.split(\"&\")[0];\n        console.log(\"code为：\", code);\n        getUserLogin(code)\n            .then((res) => {\n                console.log(\"getUserLogin获取的res:\", res);\n                localStorage.setItem(\"token\", JSON.stringify(res.data.accessToken));\n                getUserPermission(res.data.userId).then((res) => {\n                    role = res.data.viewPermissoins;\n                    store.role = role;\n                    !role.value.length\n                        ? router.push({\n                              name: \"details\",\n                              params: {\n                                  type: \"role\",\n                                  id: 0,\n                              },\n                          })\n                        : router.push({\n                              name: \"company\",\n                          });\n                });\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n});\n</script>\n<style lang=\"less\" scoped>\n@import \"@/assets/css/views/home.less\";\n</style>\n","import script from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=f18085d4&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/omp/omp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f18085d4\"]])\n\nexport default __exports__"],"names":["getUserLogin","code","$admin","get","getUserPermission","userId","APPID","path","encodeURIComponent","location","href","router","useRouter","store","deepBerryStore","role","storeToRefs","console","log","onMounted","document","search","split","then","res","localStorage","setItem","JSON","stringify","data","accessToken","viewPermissoins","value","length","push","name","params","type","id","catch","err","__exports__"],"sourceRoot":""}