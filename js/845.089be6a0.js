"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[845],{3845:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var n=o(6252),a=o(2262),s=o(2908),c=o(2201),r=o(6146);function l(e){return(0,r.u)().get(`/api/Work/login${e}`)}function i(e){return(0,r.u)().get(`/api/Manage/uer/${e}/role`)}var u=o(5752),p=o(8825);const d=e=>((0,n.dD)("data-v-f18085d4"),e=e(),(0,n.Cn)(),e),h={class:"v-home"},g=["src"],m=d((()=>(0,n._)("span",{class:"title"},"深莓智能运营管理平台",-1)));var f={__name:"HomeView",setup(e){const t="ww5429d07e97752284",o=`https://open.weixin.qq.com/connect/oauth2/authorize?appid=${t}&redirect_uri=${encodeURIComponent(location.href)}&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect`,r=(0,c.tv)(),d=(0,p.t)();let{role:f}=(0,u.Jk)(d);return console.log(f),(0,n.bv)((()=>{if(document.location.search){let e=document.location.search;e=e.split("&")[0],console.log("code为：",e),l(e).then((e=>{console.log("getUserLogin获取的res:",e),localStorage.setItem("token",JSON.stringify(e.data.accessToken)),i(e.data.userId).then((e=>{f=e.data.viewPermissoins,d.role=f,f.value.length?r.push({name:"company"}):r.push({name:"details",params:{type:"role",id:0}})}))})).catch((e=>{console.log(e)}))}})),(e,t)=>((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("img",{class:"logo",src:(0,a.SU)(s),alt:"深莓智能"},null,8,g),m,(0,n._)("a",{href:o,class:"button"},"点击进入")]))}},v=o(3744);const _=(0,v.Z)(f,[["__scopeId","data-v-f18085d4"]]);var w=_}}]);
//# sourceMappingURL=845.089be6a0.js.map