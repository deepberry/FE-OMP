{"version":3,"file":"js/173.d14e10a2.js","mappings":"qkBA4CA,IAAIA,GAAeC,EAAAA,EAAAA,IAAI,IACnBC,GAAaD,EAAAA,EAAAA,IAAI,KAGrBE,EAAAA,EAAAA,KAAU,KACNH,EAAaI,MAAS,GAAEC,SAASC,gBAAgBN,eACjDE,EAAWE,MAAQJ,EAAaI,MAAQ,GAAK,IAE7CG,OAAOC,SAAW,WACdR,EAAaI,MAAS,GAAEC,SAASC,gBAAgBN,eACjDE,EAAWE,MAAQJ,EAAaI,MAAQ,GAAK,QAIrD,MAAMK,EAAQ,CACV,CACIC,KAAM,OAEV,CACIA,KAAM,QAEV,CACIA,KAAM,QAEV,CACIA,KAAM,SAKRC,GAAaV,EAAAA,EAAAA,IAAI,CACnB,CACIW,GAAI,EACJC,MAAO,OACPC,SAAU,CACN,CACIF,GAAI,EACJC,MAAO,UAEX,CACID,GAAI,EACJC,MAAO,QAEX,CACID,GAAI,EACJC,MAAO,UAEX,CACID,GAAI,EACJC,MAAO,QAEX,CACID,GAAI,EACJC,MAAO,SACPC,SAAU,CACN,CACIF,GAAI,EACJC,MAAO,cAM3B,CACID,GAAI,EACJC,MAAO,OACPC,SAAU,CACN,CACIF,GAAI,EACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,YAInB,CACID,GAAI,GACJC,MAAO,OACPC,SAAU,CACN,CACIF,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,SACPC,SAAU,CACN,CACIF,GAAI,GACJC,MAAO,cAM3B,CACID,GAAI,GACJC,MAAO,KACPC,SAAU,CACN,CACIF,GAAI,GACJC,MAAO,QAEX,CACID,GAAI,GACJC,MAAO,QAEX,CACID,GAAI,GACJC,MAAO,UAEX,CACID,GAAI,GACJC,MAAO,OACPC,SAAU,CACN,CACIF,GAAI,GACJC,MAAO,gBAQ/B,IAAID,EAAK,IAET,MAAMG,EAAUC,IACZ,MAAMC,EAAW,CAAEL,GAAIA,IAAMC,MAAO,KAAMC,SAAU,IAC/CE,EAAKF,WACNE,EAAKF,SAAW,IAEpBE,EAAKF,SAASI,KAAKD,GACnBN,EAAWP,MAAQ,IAAIO,EAAWP,QAGhCe,EAAS,CAACC,EAAMJ,KAClB,MAAMK,EAASD,EAAKC,OACdP,EAAWO,EAAOL,KAAKF,UAAYO,EAAOL,KAC1CM,EAAQR,EAASS,WAAWC,GAAMA,EAAEZ,KAAOI,EAAKJ,KACtDE,EAASW,OAAOH,EAAO,GACvBX,EAAWP,MAAQ,IAAIO,EAAWP,Q,ouCCtMtC,MAAMsB,EAAc,EAEpB","sources":["webpack://omp/./src/views/RolePermission.vue","webpack://omp/./src/views/RolePermission.vue?932a"],"sourcesContent":["<template>\n    <div class=\"m-roles\">\n        <h2 class=\"m-title\">角色权限</h2>\n        <div class=\"m-content\">\n            <div class=\"m-role\" :style=\"`height: ${roleHeight}px`\">\n                <el-button class=\"u-add\" type=\"success\"> + 新建角色 </el-button>\n                <!-- 角色 -->\n                <div class=\"u-row\" v-for=\"(item, i) in roles\" :key=\"i\">\n                    <span class=\"u-label\">{{ item.name }}</span>\n                    <div class=\"u-button\">\n                        <Edit class=\"u-icon u-edit\" />\n                        <CloseBold class=\"u-icon u-del\" />\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"m-user-role\" :style=\"`height: ${roleHeight}px`\">\n                <h4>\n                    <span>功能权限</span>\n                    <el-button class=\"u-add\" type=\"success\">复制权限并新建角色</el-button>\n                </h4>\n                <div class=\"m-tree\">\n                    <el-tree :data=\"dataSource\" show-checkbox node-key=\"id\" default-expand-all>\n                        <template #default=\"{ node, data }\">\n                            <span class=\"custom-tree-node\">\n                                <span>{{ node.label }}</span>\n                                <span class=\"u-button\">\n                                    <a class=\"u-add\" @click=\"append(data)\"> 新增 </a>\n                                    <a class=\"u-del\" style=\"margin-left: 8px\" @click=\"remove(node, data)\"> 删除 </a>\n                                </span>\n                            </span>\n                        </template>\n                    </el-tree>\n                </div>\n                <div class=\"m-button\">\n                    <el-button>取消</el-button>\n                    <el-button type=\"primary\">保存</el-button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script setup>\nimport { ref, onMounted } from \"vue\";\nlet clientHeight = ref(\"\");\nlet roleHeight = ref(\"\");\n\n// role内容高度\nonMounted(() => {\n    clientHeight.value = `${document.documentElement.clientHeight}`;\n    roleHeight.value = clientHeight.value - 84 - 120;\n\n    window.onresize = function () {\n        clientHeight.value = `${document.documentElement.clientHeight}`;\n        roleHeight.value = clientHeight.value - 84 - 120;\n    };\n});\n\nconst roles = [\n    {\n        name: \"管理员\",\n    },\n    {\n        name: \"普通用户\",\n    },\n    {\n        name: \"技术人员\",\n    },\n    {\n        name: \"市场人员\",\n    },\n];\n//\n\nconst dataSource = ref([\n    {\n        id: 1,\n        label: \"客户管理\",\n        children: [\n            {\n                id: 2,\n                label: \"查看客户列表\",\n            },\n            {\n                id: 3,\n                label: \"企业开户\",\n            },\n            {\n                id: 4,\n                label: \"停用企业账户\",\n            },\n            {\n                id: 5,\n                label: \"启用账户\",\n            },\n            {\n                id: 6,\n                label: \"查看客户详情\",\n                children: [\n                    {\n                        id: 7,\n                        label: \"修改客户信息\",\n                    },\n                ],\n            },\n        ],\n    },\n    {\n        id: 8,\n        label: \"用户管理\",\n        children: [\n            {\n                id: 9,\n                label: \"查看用户列表\",\n            },\n            {\n                id: 10,\n                label: \"停用用户帐号\",\n            },\n            {\n                id: 11,\n                label: \"启用用户帐号\",\n            },\n            {\n                id: 12,\n                label: \"查看用户详情\",\n            },\n        ],\n    },\n    {\n        id: 13,\n        label: \"设备管理\",\n        children: [\n            {\n                id: 14,\n                label: \"查看设备列表\",\n            },\n            {\n                id: 15,\n                label: \"添加设备信息\",\n            },\n            {\n                id: 16,\n                label: \"删除设备信息\",\n            },\n            {\n                id: 17,\n                label: \"查看设备详情\",\n                children: [\n                    {\n                        id: 18,\n                        label: \"修改设备信息\",\n                    },\n                ],\n            },\n        ],\n    },\n    {\n        id: 19,\n        label: \"设置\",\n        children: [\n            {\n                id: 20,\n                label: \"当前帐号\",\n            },\n            {\n                id: 21,\n                label: \"成员列表\",\n            },\n            {\n                id: 22,\n                label: \"删除设备信息\",\n            },\n            {\n                id: 23,\n                label: \"角色权限\",\n                children: [\n                    {\n                        id: 24,\n                        label: \"修改角色权限\",\n                    },\n                ],\n            },\n        ],\n    },\n]);\n\nlet id = 1000;\n// 添加\nconst append = (data) => {\n    const newChild = { id: id++, label: \"新增\", children: [] };\n    if (!data.children) {\n        data.children = [];\n    }\n    data.children.push(newChild);\n    dataSource.value = [...dataSource.value];\n};\n// 移除\nconst remove = (node, data) => {\n    const parent = node.parent;\n    const children = parent.data.children || parent.data;\n    const index = children.findIndex((d) => d.id === data.id);\n    children.splice(index, 1);\n    dataSource.value = [...dataSource.value];\n};\n</script>\n<style lang=\"less\">\n@import \"@/assets/css/views/role.less\";\n</style>\n","import script from \"./RolePermission.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RolePermission.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RolePermission.vue?vue&type=style&index=0&id=303fcfcf&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["clientHeight","ref","roleHeight","onMounted","value","document","documentElement","window","onresize","roles","name","dataSource","id","label","children","append","data","newChild","push","remove","node","parent","index","findIndex","d","splice","__exports__"],"sourceRoot":""}