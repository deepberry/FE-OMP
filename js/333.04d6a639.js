"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[333],{3333:function(e,l,t){t.r(l),t.d(l,{default:function(){return V}});var a=t(6252),o=t(2262),i=t(3577),n=t(4239);const d={class:"u-table-button"},s=(0,a.Uk)("编辑"),r=(0,a.Uk)("查看详情 ");var u={__name:"equipmentTable",props:{table:Array,label:String},emits:["toDialog"],setup(e,{emit:l}){const t=e;let i=(0,o.qj)({data:[]});function n(e,t){l("toDialog",{row:e,type:t})}return(0,a.YP)(t,(e=>{i.data=e.table}),{deep:!0}),(l,t)=>{const u=(0,a.up)("el-table-column"),c=(0,a.up)("el-button"),p=(0,a.up)("router-link"),m=(0,a.up)("el-table");return(0,a.wg)(),(0,a.j4)(m,{class:"m-table",data:(0,o.SU)(i).data,border:"",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{prop:"deviceId",label:"设备ID"}),(0,a.Wm)(u,{prop:"deviceName",label:"硬件名称"}),(0,a.Wm)(u,{prop:"orgzName",label:"归属企业"}),(0,a.Wm)(u,{prop:"hard_version",label:"硬件版本"}),(0,a.Wm)(u,{prop:"soft_version",label:"固件版本"}),(0,a.Wm)(u,{prop:"iccid",label:"ICCID"}),(0,a.Wm)(u,{prop:"address",label:"操作",width:"240"},{default:(0,a.w5)((l=>[(0,a._)("div",d,[(0,a.Wm)(c,{link:"",type:"primary",size:"small",onClick:e=>n(l.row)},{default:(0,a.w5)((()=>[s])),_:2},1032,["onClick"]),(0,a.Wm)(p,{to:{path:`/${e.label}/details/${l.row.deviceId}`},class:"u-table-more"},{default:(0,a.w5)((()=>[r])),_:2},1032,["to"])])])),_:1})])),_:1},8,["data"])}}},c=t(3744);const p=(0,c.Z)(u,[["__scopeId","data-v-491780ee"]]);var m=p;const g={key:0,class:"dialog-footer"},b={emits:["dialogClose","dialogSuccess"]};var f=Object.assign(b,{__name:"equipmentFormDialog",props:{dialogObject:Object},setup(e,{emit:l}){const t=e,n=(0,a.Fl)({get(){return t.dialogObject.dialogVisible},set(e){return e}}),d={dialogTitle:t.dialogObject.title||"设备信息",dialogWidth:t.dialogObject.width||"760px",dialogCloseBtnText:t.dialogObject.closeBtnText||"取消",dialogSuccessBtnText:t.dialogObject.successBtnText||"成功",dialogIsFooter:t.dialogObject.isFooter||!0,dialogContent:t.dialogObject.content||"是否停用"},s=(0,a.Fl)((()=>t.dialogObject.equipment));let r=(0,o.qj)({form:{}});const u=(0,o.iH)(""),c=(0,o.iH)({orgzId:[{required:!0,message:"请选择企业",trigger:"blur"}],deviceName:[{required:!0,message:"请输入设备名称",trigger:"blur"}],deviceId:[{required:!0,message:"请输入设备ID",trigger:"blur"}]});(0,a.YP)(s,(e=>r.form=e),{deep:!0,immediate:!0});const p=e=>{l("dialogClose"),e.resetFields()},m=e=>{e&&e.validate(((e,t)=>{e?l("dialogSuccess",r.form):console.log("error submit!",t)}))};return(e,l)=>{const t=(0,a.up)("el-input"),s=(0,a.up)("el-form-item"),b=(0,a.up)("el-form"),f=(0,a.up)("el-button"),v=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(v,{modelValue:(0,o.SU)(n),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.dq)(n)?n.value=e:null),title:d.dialogTitle,width:d.dialogWidth,"before-close":p,draggable:""},{footer:(0,a.w5)((()=>[d.dialogIsFooter?((0,a.wg)(),(0,a.iD)("span",g,[(0,a.Wm)(f,{onClick:l[3]||(l[3]=e=>p(u.value))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(d.dialogCloseBtnText),1)])),_:1}),(0,a.Wm)(f,{type:"primary",onClick:l[4]||(l[4]=e=>m(u.value))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(d.dialogSuccessBtnText),1)])),_:1})])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"m-form-content",ref_key:"formRef",ref:u,model:(0,o.SU)(r).form,rules:c.value,"label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"设备ID",prop:"deviceId"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:(0,o.SU)(r).form.deviceId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,o.SU)(r).form.deviceId=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(s,{label:"硬件名称",prop:"deviceName"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:(0,o.SU)(r).form.deviceName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(r).form.deviceName=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(s,{label:"归属客户",prop:"orgzId"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:(0,o.SU)(r).form.orgzId,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.SU)(r).form.orgzId=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","width"])])}}});const v=f;var w=v,_=t(6146);function U(e){return(0,_.u)().get("/api/Device",{params:e})}function S(e){return(0,_.u)().post("/api/Device",e)}function W(e){return(0,_.u)().put("/api/Device",e)}var h=t(9996);const I={class:"v-equipment"},k={class:"m-title"},j={class:"m-search-box"},y=(0,a.Uk)("添加设备");var C={__name:"EquipmentList",setup(e){const l=(0,n.t)(),{label:t,deepBerry:d}=l,{title:s,icon:r}=d[t],u={uid:"",placeholder:"请输入设备ID/硬件名称/ICCID/归属客户",bind_title:"-- 绑定状态 --",bind:[{label:"已绑定",value:1},{label:"未绑定",value:0}],connect_title:"-- 连接状态 --",connect:[{label:"在线",value:1},{label:"离线",value:0}]};let c=(0,o.qj)({loading:!1,table:[],pagination:{page:1,per:20,total:0},search:{input:null,status:null},form:{}});const p=(0,a.Fl)((()=>({pageIndex:c.pagination.page-1,pageSize:c.pagination.per}))),g={};let b=(0,o.qj)({dialogVisible:!1,equipment:g});function f({input_txt:e,status_id:l}){c.search.input=e,c.search.status=-1==l?null:l,c.pagination.page=1,V()}function v(e){c.pagination.page=e,V()}const _=()=>{b.dialogVisible=!1};function C({row:e,type:l}){b.dialogVisible=!0;const t=e||g;"add"==l&&(t.add=!0),b.equipment=t}const D=e=>{b.dialogVisible=!1,e.add?S(e).then((()=>{(0,h.bM)({title:"成功",message:"添加设备成功",type:"success"})})):W(e).then((()=>{(0,h.bM)({title:"成功",message:"修改设备信息成功",type:"success"})}))};function V(){c.loading=!0,U(p.value).then((e=>{if("200"==e.status){const l=e.data.data;console.log(l),c.table=l.datas,c.pagination.total=l.totalCount}})).finally((()=>c.loading=!1))}return(0,a.bv)((()=>V())),(e,l)=>{const n=(0,a.up)("search-bar"),d=(0,a.up)("el-button"),p=(0,a.up)("commonPagination"),g=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",I,[(0,a._)("h2",k,[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,o.SU)(r)),{class:"u-title-icon"})),(0,a.Uk)((0,i.zw)((0,o.SU)(s)),1)]),(0,a._)("div",j,[(0,a.Wm)(n,{data:u,onToSearch:f}),(0,a.Wm)(d,{class:"u-add",type:"primary",onClick:l[0]||(l[0]=e=>C({type:"add"}))},{default:(0,a.w5)((()=>[y])),_:1})]),(0,a.wy)((0,a.Wm)((0,o.SU)(m),{table:(0,o.SU)(c).table,label:(0,o.SU)(t),onToDialog:C},null,8,["table","label"]),[[g,(0,o.SU)(c).loading]]),(0,a.Wm)(p,{pagination:(0,o.SU)(c).pagination,onToParams:v},null,8,["pagination"]),(0,a.Wm)((0,o.SU)(w),{class:"m-form","dialog-object":(0,o.SU)(b),onDialogClose:_,onDialogSuccess:D},null,8,["dialog-object"])])}}};const D=C;var V=D}}]);
//# sourceMappingURL=333.04d6a639.js.map