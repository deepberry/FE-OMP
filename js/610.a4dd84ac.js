"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[610],{999:function(t,a,e){e.d(a,{O3:function(){return n},lz:function(){return o},wN:function(){return s}});var l=e(6146);function s(t){return(0,l.u)().get("/api/User",{params:t})}function o(t,a){return(0,l.u)().put(`/api/User/${t}/enabled/${a}`)}function n(t){return(0,l.u)().get(`/api/User/${t}`)}},5610:function(t,a,e){e.r(a),e.d(a,{default:function(){return y}});var l=e(6252),s=e(2262),o=e(3577),n=e(8825),u=(e(6699),e(1575));const i={class:"u-table-button"},r=(0,l.Uk)("查看详情 ");var p={__name:"customerTable",props:{table:Array,label:String},emits:["toDialog"],setup(t,{emit:a}){const e=t,p=(0,n.t)(),{role:c}=(0,u.Jk)(p);let d=(0,s.qj)({data:[]});const b=(0,l.Fl)((()=>c.value.includes(17))),m=(0,l.Fl)((()=>c.value.includes(15))),g=[17,15],w=(0,l.Fl)((()=>c.value.map((t=>g.includes(t))).filter(Boolean).length));function f(t,e){a("toDialog",{row:t,type:e})}return(0,l.YP)(e,(t=>{d.data=t.table}),{deep:!0}),(a,e)=>{const n=(0,l.up)("el-table-column"),u=(0,l.up)("el-button"),p=(0,l.up)("router-link"),c=(0,l.up)("el-table");return(0,l.wg)(),(0,l.j4)(c,{class:"m-table",data:(0,s.SU)(d).data,border:"",fit:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{prop:"userId",label:"用户ID",width:"120"}),(0,l.Wm)(n,{prop:"userName",label:"用户名",width:"180"}),(0,l.Wm)(n,{prop:"phoneNum",label:"手机号码",width:"180"}),(0,l.Wm)(n,{prop:"orgzName",label:"所在企业"}),(0,l.Wm)(n,{prop:"status",label:"帐号状态",width:"120"},{default:(0,l.w5)((t=>[(0,l._)("span",{class:(0,o.C_)("禁用"===t.row.status?"u-table-disabled":"u-table-normal")},(0,o.zw)(t.row.status),3)])),_:1}),(0,l.Wm)(n,{prop:"updateAt",label:"最近登录",width:"240"}),(0,s.SU)(w)?((0,l.wg)(),(0,l.j4)(n,{key:0,prop:"address",label:"操作",width:"180"},{default:(0,l.w5)((a=>[(0,l._)("div",i,[(0,s.SU)(m)?((0,l.wg)(),(0,l.j4)(u,{key:0,link:"",type:"primary",size:"small",onClick:t=>f(a.row)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)("正常"==a.row.status?"停用":"启用"),1)])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,s.SU)(b)&&a.row.userId?((0,l.wg)(),(0,l.j4)(p,{key:1,to:{path:`/${t.label}/details/${a.row.userId}`},class:"u-table-more"},{default:(0,l.w5)((()=>[r])),_:2},1032,["to"])):(0,l.kq)("",!0)])])),_:1})):(0,l.kq)("",!0)])),_:1},8,["data"])}}},c=e(3744);const d=(0,c.Z)(p,[["__scopeId","data-v-4d0d63ad"]]);var b=d,m=e(999),g=e(9996);const w={class:"v-customer v-page"},f={class:"m-search-box"},h={class:"m-tips-content"},_=(0,l._)("span",{class:"u-title"},"是否启用/停用用户帐号",-1),v={class:"u-label"},k={class:"u-value"};var S={__name:"CustomerList",setup(t){const a=(0,n.t)(),{label:e}=(0,u.Jk)(a),i={uid:"",placeholder:"请输入用户ID/用户姓名/手机号码/所在成员名称",status_title:"-- 用户帐号状态 --",status:[{label:"正常",value:0},{label:"已停用",value:1}]};let r=(0,s.qj)({loading:!1,table:[],pagination:{page:1,per:20,total:0},search:{input:null,status:null},form:{}});const p=(0,l.Fl)((()=>({pageIndex:r.pagination.page-1,pageSize:r.pagination.per,Condition:r.search.input,Status:r.search.status}))),c={};let d=(0,s.iH)("form"),S=(0,s.qj)({dialogVisible:!1,customer:c});function U({input_txt:t,status_id:a}){r.search.input=t,r.search.status=-1==a?null:a,r.pagination.page=1,C()}function y(t){r.pagination.page=t,C()}function z({row:t,type:a}){S.dialogVisible=!0,S.customer=t||c,d.value="close"==a?"tips":"form"}const W=()=>{S.dialogVisible=!1},j=()=>{const{userId:t,status:a}=S.customer,e="正常"==a?1:0,l=1==e?"启用":"停用";(0,m.lz)(t,e).then((()=>{S.dialogVisible=!1,C(),(0,g.bM)({title:"成功",message:`${l}成员成功`,type:"success"})}))};function C(){r.loading=!0,(0,m.wN)(p.value).then((t=>{if("200"==t.status){const a=t.data.data;r.table=a.datas,r.pagination.total=a.totalCount}})).finally((()=>r.loading=!1))}return(0,l.bv)((()=>C())),(t,a)=>{const n=(0,l.up)("search-bar"),u=(0,l.up)("commonPagination"),p=(0,l.up)("tipsDialog"),c=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",w,[(0,l._)("div",f,[(0,l.Wm)(n,{data:i,onToSearch:U})]),(0,l.wy)((0,l.Wm)((0,s.SU)(b),{table:(0,s.SU)(r).table,label:(0,s.SU)(e),onToDialog:z},null,8,["table","label"]),[[c,(0,s.SU)(r).loading]]),(0,l.Wm)(u,{pagination:(0,s.SU)(r).pagination,onToParams:y},null,8,["pagination"]),(0,l.Wm)(p,{class:"m-tips","dialog-object":(0,s.SU)(S),onDialogClose:W,onDialogSuccess:j},{default:(0,l.w5)((()=>[(0,l._)("div",h,[_,(0,l._)("span",v,(0,o.zw)((0,s.SU)(S).customer.orgzName),1),(0,l._)("span",k,"("+(0,o.zw)((0,s.SU)(S).customer.phoneNum)+")",1)])])),_:1},8,["dialog-object"])])}}};const U=S;var y=U}}]);
//# sourceMappingURL=610.a4dd84ac.js.map