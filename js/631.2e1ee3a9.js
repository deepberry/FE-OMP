(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[631],{9662:function(e,t,n){var r=n(614),o=n(6330),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not a function")}},1223:function(e,t,n){var r=n(5112),o=n(30),i=n(3070).f,u=r("unscopables"),c=Array.prototype;void 0==c[u]&&i(c,u,{configurable:!0,value:o(null)}),e.exports=function(e){c[u][e]=!0}},9670:function(e,t,n){var r=n(111),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not an object")}},1318:function(e,t,n){var r=n(5656),o=n(1400),i=n(6244),u=function(e){return function(t,n,u){var c,a=r(t),l=i(a),s=o(u,l);if(e&&n!=n){while(l>s)if(c=a[s++],c!=c)return!0}else for(;l>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}};e.exports={includes:u(!0),indexOf:u(!1)}},4326:function(e,t,n){var r=n(1702),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},9920:function(e,t,n){var r=n(2597),o=n(3887),i=n(1236),u=n(3070);e.exports=function(e,t,n){for(var c=o(t),a=u.f,l=i.f,s=0;s<c.length;s++){var f=c[s];r(e,f)||n&&r(n,f)||a(e,f,l(t,f))}}},8880:function(e,t,n){var r=n(9781),o=n(3070),i=n(9114);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8052:function(e,t,n){var r=n(614),o=n(3070),i=n(6339),u=n(3072);e.exports=function(e,t,n,c){c||(c={});var a=c.enumerable,l=void 0!==c.name?c.name:t;if(r(n)&&i(n,l,c),c.global)a?e[t]=n:u(t,n);else{try{c.unsafe?e[t]&&(a=!0):delete e[t]}catch(s){}a?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var r=n(7854),o=n(111),i=r.document,u=o(i)&&o(i.createElement);e.exports=function(e){return u?i.createElement(e):{}}},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,o,i=n(7854),u=n(8113),c=i.process,a=i.Deno,l=c&&c.versions||a&&a.version,s=l&&l.v8;s&&(r=s.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&u&&(r=u.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=u.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),e.exports=o},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),o=n(1236).f,i=n(8880),u=n(8052),c=n(3072),a=n(9920),l=n(4705);e.exports=function(e,t){var n,s,f,p,d,g,m=e.target,v=e.global,h=e.stat;if(s=v?r:h?r[m]||c(m,{}):(r[m]||{}).prototype,s)for(f in t){if(d=t[f],e.dontCallGetSet?(g=o(s,f),p=g&&g.value):p=s[f],n=l(v?f:m+(h?".":"#")+f,e.forced),!n&&void 0!==p){if(typeof d==typeof p)continue;a(d,p)}(e.sham||p&&p.sham)&&i(d,"sham",!0),u(s,f,d,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(e,t,n){var r=n(9781),o=n(2597),i=Function.prototype,u=r&&Object.getOwnPropertyDescriptor,c=o(i,"name"),a=c&&"something"===function(){}.name,l=c&&(!r||r&&u(i,"name").configurable);e.exports={EXISTS:c,PROPER:a,CONFIGURABLE:l}},1702:function(e,t,n){var r=n(4374),o=Function.prototype,i=o.bind,u=o.call,c=r&&i.bind(u,u);e.exports=r?function(e){return e&&c(e)}:function(e){return e&&function(){return u.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),o=n(614),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},3501:function(e){e.exports={}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),o=n(7293),i=n(317);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),o=n(7293),i=n(4326),u=Object,c=r("".split);e.exports=o((function(){return!u("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?c(e,""):u(e)}:u},2788:function(e,t,n){var r=n(1702),o=n(614),i=n(5465),u=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return u(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var r,o,i,u=n(8536),c=n(7854),a=n(1702),l=n(111),s=n(8880),f=n(2597),p=n(5465),d=n(6200),g=n(3501),m="Object already initialized",v=c.TypeError,h=c.WeakMap,b=function(e){return i(e)?o(e):r(e,{})},y=function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(u||p.state){var w=p.state||(p.state=new h),x=a(w.get),S=a(w.has),O=a(w.set);r=function(e,t){if(S(w,e))throw new v(m);return t.facade=e,O(w,e,t),t},o=function(e){return x(w,e)||{}},i=function(e){return S(w,e)}}else{var j=d("state");g[j]=!0,r=function(e,t){if(f(e,j))throw new v(m);return t.facade=e,s(e,j,t),t},o=function(e){return f(e,j)?e[j]:{}},i=function(e){return f(e,j)}}e.exports={set:r,get:o,has:i,enforce:b,getterFor:y}},614:function(e){e.exports=function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,u=function(e,t){var n=a[c(e)];return n==s||n!=l&&(o(t)?r(t):!!t)},c=u.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=u.data={},l=u.NATIVE="N",s=u.POLYFILL="P";e.exports=u},111:function(e,t,n){var r=n(614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),o=n(614),i=n(7976),u=n(3307),c=Object;e.exports=u?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&i(t.prototype,c(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(7293),o=n(614),i=n(2597),u=n(9781),c=n(6530).CONFIGURABLE,a=n(2788),l=n(9909),s=l.enforce,f=l.get,p=Object.defineProperty,d=u&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),g=String(String).split("String"),m=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!i(e,"name")||c&&e.name!==t)&&(u?p(e,"name",{value:t,configurable:!0}):e.name=t),d&&n&&i(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&i(n,"constructor")&&n.constructor?u&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=s(e);return i(r,"source")||(r.source=g.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return o(this)&&f(this).source||a(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},133:function(e,t,n){var r=n(7392),o=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(e,t,n){var r=n(7854),o=n(614),i=n(2788),u=r.WeakMap;e.exports=o(u)&&/native code/.test(i(u))},30:function(e,t,n){var r,o=n(9670),i=n(6048),u=n(748),c=n(3501),a=n(490),l=n(317),s=n(6200),f=">",p="<",d="prototype",g="script",m=s("IE_PROTO"),v=function(){},h=function(e){return p+g+f+e+p+"/"+g+f},b=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+g+":";return t.style.display="none",a.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(h("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&r?b(r):y():b(r);var e=u.length;while(e--)delete w[d][u[e]];return w()};c[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[d]=o(e),n=new v,v[d]=null,n[m]=e):n=w(),void 0===t?n:i.f(n,t)}},6048:function(e,t,n){var r=n(9781),o=n(3353),i=n(3070),u=n(9670),c=n(5656),a=n(1956);t.f=r&&!o?Object.defineProperties:function(e,t){u(e);var n,r=c(t),o=a(t),l=o.length,s=0;while(l>s)i.f(e,n=o[s++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),o=n(4664),i=n(3353),u=n(9670),c=n(4948),a=TypeError,l=Object.defineProperty,s=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",d="writable";t.f=r?i?function(e,t,n){if(u(e),t=c(t),u(n),"function"===typeof e&&"prototype"===t&&"value"in n&&d in n&&!n[d]){var r=s(e,t);r&&r[d]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:f in n?n[f]:r[f],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(u(e),t=c(t),u(n),o)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw a("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),o=n(6916),i=n(5296),u=n(9114),c=n(5656),a=n(4948),l=n(2597),s=n(4664),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=c(e),t=a(t),s)try{return f(e,t)}catch(n){}if(l(e,t))return u(!o(i.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),o=n(748),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),o=n(2597),i=n(5656),u=n(1318).indexOf,c=n(3501),a=r([].push);e.exports=function(e,t){var n,r=i(e),l=0,s=[];for(n in r)!o(c,n)&&o(r,n)&&a(s,n);while(t.length>l)o(r,n=t[l++])&&(~u(s,n)||a(s,n));return s}},1956:function(e,t,n){var r=n(6324),o=n(748);e.exports=Object.keys||function(e){return r(e,o)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},2140:function(e,t,n){var r=n(6916),o=n(614),i=n(111),u=TypeError;e.exports=function(e,t){var n,c;if("string"===t&&o(n=e.toString)&&!i(c=r(n,e)))return c;if(o(n=e.valueOf)&&!i(c=r(n,e)))return c;if("string"!==t&&o(n=e.toString)&&!i(c=r(n,e)))return c;throw u("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),o=n(1702),i=n(8006),u=n(5181),c=n(9670),a=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(c(e)),n=u.f;return n?a(t,n(e)):t}},4488:function(e){var t=TypeError;e.exports=function(e){if(void 0==e)throw t("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),o=n(9711),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:function(e,t,n){var r=n(7854),o=n(3072),i="__core-js_shared__",u=r[i]||o(i,{});e.exports=u},2309:function(e,t,n){var r=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.23.3",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(e,t,n){var r=n(9303),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},5656:function(e,t,n){var r=n(8361),o=n(4488);e.exports=function(e){return r(o(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),o=Object;e.exports=function(e){return o(r(e))}},7593:function(e,t,n){var r=n(6916),o=n(111),i=n(2190),u=n(8173),c=n(2140),a=n(5112),l=TypeError,s=a("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n,a=u(e,s);if(a){if(void 0===t&&(t="default"),n=r(a,e,t),!o(n)||i(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},4948:function(e,t,n){var r=n(7593),o=n(2190);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),o=0,i=Math.random(),u=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+u(++o+i,36)}},3307:function(e,t,n){var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),o=n(7293);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:function(e,t,n){var r=n(7854),o=n(2309),i=n(2597),u=n(9711),c=n(133),a=n(3307),l=o("wks"),s=r.Symbol,f=s&&s["for"],p=a?s:s&&s.withoutSetter||u;e.exports=function(e){if(!i(l,e)||!c&&"string"!=typeof l[e]){var t="Symbol."+e;c&&i(s,e)?l[e]=s[e]:l[e]=a&&f?f(t):p(t)}return l[e]}},6699:function(e,t,n){"use strict";var r=n(2109),o=n(1318).includes,i=n(7293),u=n(1223),c=i((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:c},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),u("includes")},8354:function(e,t,n){"use strict";n.d(t,{Aq:function(){return u},F3:function(){return a},_d:function(){return i},bG:function(){return o},hH:function(){return l},he:function(){return s},k8:function(){return c},yV:function(){return f}});var r=n(6146);function o(){return(0,r.u)().get("/api/Work/userInfo")}function i(e){return(0,r.u)().post("/api/Manage/role",e)}function u(e){return(0,r.u)().put("/api/Manage/role",e)}function c(e){return(0,r.u)().delete(`/api/Manage/role/${e}`)}function a(){return(0,r.u)().get("/api/Manage/role")}function l(e){return(0,r.u)().get(`/api/Manage/role/${e}`)}function s({id:e,prmIds:t}){return(0,r.u)().post(`/api/Manage/role/${e}/permission`,{prmIds:t})}function f(){return(0,r.u)().get("/api/Manage/permission")}},7631:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});n(6699);var r=n(6252),o=n(3577),i=n(2262),u=n(9963);const c={key:0,class:"dialog-footer"},a={emits:["dialogClose","dialogSuccess"]};var l=Object.assign(a,{__name:"roleFormDialog",props:{dialogObject:Object},setup(e,{emit:t}){const n=e,u=(0,r.Fl)({get(){return n.dialogObject.dialogVisible},set(e){return e}}),a=(0,r.Fl)((()=>({dialogTitle:n.dialogObject.title||"新建角色",dialogWidth:n.dialogObject.width||"760px",dialogCloseBtnText:n.dialogObject.closeBtnText||"取消",dialogSuccessBtnText:n.dialogObject.successBtnText||"成功",dialogIsFooter:n.dialogObject.isFooter||!0,dialogContent:n.dialogObject.content||"是否停用",dialogForm:n.dialogObject.form||l.form}))),l=(0,i.qj)({form:{name:"",describe:""}}),s=(0,i.iH)(""),f=(0,i.iH)({name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}),p=()=>{t("dialogClose"),s.value.resetFields()},d=e=>{e&&e.validate(((e,n)=>{if(e){const e={id:a.value.dialogForm.roleId,description:a.value.dialogForm.describe,name:a.value.dialogForm.name,prmIds:a.value.dialogForm.prmIds};t("dialogSuccess",e)}else console.log("error submit!",n)}))};return(e,t)=>{const n=(0,r.up)("el-input"),l=(0,r.up)("el-form-item"),g=(0,r.up)("el-form"),m=(0,r.up)("el-button"),v=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(v,{modelValue:(0,i.SU)(u),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,i.dq)(u)?u.value=e:null),title:(0,i.SU)(a).dialogTitle,width:(0,i.SU)(a).dialogWidth,"before-close":p,draggable:""},{footer:(0,r.w5)((()=>[(0,i.SU)(a).dialogIsFooter?((0,r.wg)(),(0,r.iD)("span",c,[(0,r.Wm)(m,{onClick:p},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)((0,i.SU)(a).dialogCloseBtnText),1)])),_:1}),(0,r.Wm)(m,{type:"primary",onClick:t[2]||(t[2]=e=>d(s.value))},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)((0,i.SU)(a).dialogSuccessBtnText),1)])),_:1})])):(0,r.kq)("",!0)])),default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"m-form-content",ref_key:"formRef",ref:s,model:(0,i.SU)(a).dialogForm,rules:f.value,"label-width":"120px"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"角色名称",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:(0,i.SU)(a).dialogForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.SU)(a).dialogForm.name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{label:"角色描述",prop:"desc"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:(0,i.SU)(a).dialogForm.describe,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,i.SU)(a).dialogForm.describe=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","width"])])}}});const s=l;var f=s,p=n(8354),d=n(9996);const g={class:"m-roles v-page"},m={class:"m-content"},v=(0,r.Uk)(" + 新建角色 "),h=["onClick"],b={class:"u-label"},y={class:"u-button"},w=(0,r.Uk)("功能权限 -【"),x=(0,r.Uk)("】"),S=(0,r.Uk)("复制权限并新建角色"),O={class:"m-tree"},j={key:0,class:"m-button"},k=(0,r.Uk)("取消"),U=(0,r.Uk)("保存");var C={__name:"RolePermission",setup(e){let t=(0,i.qj)({loading:!0,clientHeight:"",roleHeight:"",roles:[],dataSource:[],copy:!1,defaultRole:[],changeRole:[],roleName:"",roleId:""});const n=(0,i.iH)(""),c=(0,i.qj)({dialogVisible:!1,title:"",form:{}});(0,r.bv)((()=>{a(),C(),(0,p.yV)().then((e=>{let n=e.data.data;t.dataSource=l(n)}))}));const a=()=>{t.clientHeight=`${document.documentElement.clientHeight}`,t.roleHeight=t.clientHeight-130,window.onresize=()=>{t.clientHeight=`${document.documentElement.clientHeight}`,t.roleHeight=t.clientHeight-130}},l=e=>(e=e.map((e=>(e.label=e.name,e.childs.length&&(e.children=l(e.childs)),e))),e),s=e=>{let t=[];return e.forEach((e=>{t.push(e.id),e.childs&&e.childs.length&&t.push(...s(e.childs))})),t},C=()=>{t.loading=!0,(0,p.F3)().then((e=>{t.roles=e.data.data})).finally((()=>t.loading=!1))},_=(e,n)=>{t.changeRole.includes(e.id)?n||(t.changeRole=t.changeRole.filter((t=>t!==e.id))):n&&t.changeRole.push(e.id)},F=()=>{c.dialogVisible=!0,c.form={},c.title="新建角色"},P=()=>{c.dialogVisible=!1},E=e=>{console.log(e),e.id?(0,p.Aq)(e).then((()=>{console.log(e),(0,d.bM)({type:"success",title:"成功",message:`修改角色【${e.name}】成功`}),C()})):(0,p._d)(e).then((()=>{(0,d.bM)({type:"success",title:"成功",message:`添加角色【${e.name}】成功`}),C()})),P()},I=()=>{c.dialogVisible=!0,c.form={prmIds:t.changeRole},c.title="复制权限并新建角色"},M=e=>{c.dialogVisible=!0,c.form=e,c.title="编辑角色"},W=e=>{(0,p.k8)(e.roleId).then((()=>{(0,d.bM)({type:"success",title:"成功",message:`删除${e.name}成功`}),C()})).catch((e=>{console.log(e)}))},T=({roleId:e,name:r})=>{n.value.setCheckedKeys([]),t.roleName=r,t.roleId=e,(0,p.hH)(e).then((e=>{const n=e.data.data[0];n&&(t.defaultRole=s(n.viewPermissoins))}))},R=()=>{(0,p.he)({id:t.roleId,prmIds:t.changeRole}).then((()=>{(0,d.bM)({type:"success",title:"成功",message:`修改${t.roleName}权限成功`})}))};return(e,a)=>{const l=(0,r.up)("el-button"),s=(0,r.up)("Edit"),p=(0,r.up)("CloseBold"),d=(0,r.up)("el-tree"),C=(0,r.Q2)("loading");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",m,[(0,r._)("div",{class:"m-role",style:(0,o.j5)(`height: ${(0,i.SU)(t).roleHeight}px`)},[(0,r.Wm)(l,{class:"u-add",type:"success",onClick:F},{default:(0,r.w5)((()=>[v])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(t).roles,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"u-row",key:t,onClick:t=>T(e)},[(0,r._)("span",b,(0,o.zw)(e.name),1),(0,r._)("div",y,[(0,r.Wm)(s,{class:"u-icon u-edit",onClick:(0,u.iM)((t=>M(e)),["stop"])},null,8,["onClick"]),(0,r.Wm)(p,{class:"u-icon u-del",onClick:(0,u.iM)((t=>W(e)),["stop"])},null,8,["onClick"])])],8,h)))),128))],4),(0,r._)("div",{class:"m-user-role",style:(0,o.j5)(`height: ${(0,i.SU)(t).roleHeight}px`)},[(0,r._)("h4",null,[(0,r._)("span",null,[w,(0,r._)("b",null,(0,o.zw)((0,i.SU)(t).roleName?(0,i.SU)(t).roleName:"暂无角色"),1),x]),(0,r.Wm)(l,{class:"u-add",type:"success",onClick:I},{default:(0,r.w5)((()=>[S])),_:1})]),(0,r._)("div",O,[(0,r.Wm)(d,{ref_key:"tree",ref:n,data:(0,i.SU)(t).dataSource,"show-checkbox":"","check-on-click-node":!0,"expand-on-click-node":!1,"default-checked-keys":(0,i.SU)(t).defaultRole,"current-node-key":(0,i.SU)(t).currentRole,"node-key":"id","default-expand-all":"",onCheckChange:_},null,8,["data","default-checked-keys","current-node-key"])]),(0,i.SU)(t).roleName?((0,r.wg)(),(0,r.iD)("div",j,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[k])),_:1}),(0,r.Wm)(l,{type:"primary",onClick:R},{default:(0,r.w5)((()=>[U])),_:1})])):(0,r.kq)("",!0)],4)]),(0,r.Wm)((0,i.SU)(f),{class:"m-form","dialog-object":c,onDialogClose:P,onDialogSuccess:E},null,8,["dialog-object"])])),[[C,(0,i.SU)(t).loading]])}}};const _=C;var F=_}}]);
//# sourceMappingURL=631.2e1ee3a9.js.map