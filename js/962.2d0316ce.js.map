{"version":3,"file":"js/962.2d0316ce.js","mappings":"ocAeA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAGTC,EAAQ,qBACRC,EAAeC,UAAU,mCACzBC,EAAQ,6DAA4DH,kBAAsBC,qEAE1FG,GAAOC,EAAAA,EAAAA,IAAI,IACXC,GAAQC,EAAAA,EAAAA,IAAS,CACnBC,MAAM,I,OAGVV,EAAOW,KAAK,CACRC,KAAM,aAGVC,EAAAA,EAAAA,IACIf,GACCgB,IACGR,EAAKS,MAAQD,EAAIE,MAAMV,OAE3B,CAAEW,MAAM,EAAMC,WAAW,KAI7BL,EAAAA,EAAAA,IACIP,GACCA,IACOA,IACAa,EAAAA,EAAAA,cAAa,CAAEb,SACVc,MAAMN,IACHO,QAAQC,IAAIR,GACZN,EAAME,MAAO,EACba,aAAaC,QAAQ,QAASC,KAAKC,UAAUZ,EAAIa,KAAKC,cACtD5B,EAAOW,KAAK,CACRC,KAAM,eAGbiB,OAAOC,IACJT,QAAQC,IAAIQ,GACZtB,EAAME,MAAO,OAG7B,CAAEO,MAAM,EAAMC,WAAW,I,4RCrD7B,MAAMa,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://omp/./src/views/HomeView.vue","webpack://omp/./src/views/HomeView.vue?4c5b"],"sourcesContent":["<template>\n    <div class=\"v-home\">\n        <img class=\"logo\" :src=\"Logo\" alt=\"深莓智能\" />\n        <span class=\"title\">深莓智能运营管理平台</span>\n        <a :href=\"path\" class=\"button\">点击进入</a>\n        <span class=\"desc\" v-if=\"state.fail\"><Warning class=\"icon\" />连接失败，请再次尝试，或联系管理人员</span>\n    </div>\n</template>\n\n<script setup>\nimport { watch, reactive, ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport Logo from \"@deepberry/common/img/logo.svg\";\nimport { getUserLogin } from \"@/service/index.js\";\n//====== 数据 ======\nconst route = useRoute();\nconst router = useRouter();\n\n// 跳转链接数据\nconst APPID = \"ww5429d07e97752284\";\nconst REDIRECT_URI = encodeURI(\"https://admin.deepberry.cn:444/\");\nconst path = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${APPID}&redirect_uri=${REDIRECT_URI}&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect`;\n\nconst code = ref(\"\");\nconst state = reactive({\n    fail: false,\n});\n\nrouter.push({\n    name: \"company\",\n});\n// 监控路由，获取code\nwatch(\n    route,\n    (res) => {\n        code.value = res.query.code;\n    },\n    { deep: true, immediate: true }\n);\n\n// 监控code获取用户token并跳转\nwatch(\n    code,\n    (code) => {\n        if (code)\n            getUserLogin({ code })\n                .then((res) => {\n                    console.log(res);\n                    state.fail = false;\n                    localStorage.setItem(\"token\", JSON.stringify(res.data.accessToken));\n                    router.push({\n                        name: \"company\",\n                    });\n                })\n                .catch((err) => {\n                    console.log(err);\n                    state.fail = true;\n                });\n    },\n    { deep: true, immediate: true }\n);\n</script>\n<style lang=\"less\" scoped>\n@import \"@/assets/css/views/home.less\";\n</style>\n","import script from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=93a38a38&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/omp/omp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-93a38a38\"]])\n\nexport default __exports__"],"names":["route","useRoute","router","useRouter","APPID","REDIRECT_URI","encodeURI","path","code","ref","state","reactive","fail","push","name","watch","res","value","query","deep","immediate","getUserLogin","then","console","log","localStorage","setItem","JSON","stringify","data","accessToken","catch","err","__exports__"],"sourceRoot":""}