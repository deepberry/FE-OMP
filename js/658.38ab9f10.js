"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[658],{999:function(t,a,e){e.d(a,{O3:function(){return n},lz:function(){return s},wN:function(){return o}});var l=e(6146);function o(t){return(0,l.u)().get("/api/User",{params:t})}function s(t,a){return(0,l.u)().put(`/api/User/${t}/enabled/${a}`)}function n(t){return(0,l.u)().get(`/api/User/${t}`)}},2658:function(t,a,e){e.r(a),e.d(a,{default:function(){return k}});var l=e(6252),o=e(2262),s=e(3577),n=e(4239);const i={class:"u-table-button"},u=(0,l.Uk)("查看详情 ");var r={__name:"customerTable",props:{table:Array,label:String},emits:["toDialog"],setup(t,{emit:a}){const e=t;let n=(0,o.qj)({data:[]});function r(t,e){a("toDialog",{row:t,type:e})}return(0,l.YP)(e,(t=>{n.data=t.table}),{deep:!0}),(a,e)=>{const p=(0,l.up)("el-table-column"),c=(0,l.up)("el-button"),d=(0,l.up)("router-link"),m=(0,l.up)("el-table");return(0,l.wg)(),(0,l.j4)(m,{class:"m-table",data:(0,o.SU)(n).data,border:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{prop:"userId",label:"用户ID",width:"120"}),(0,l.Wm)(p,{prop:"userName",label:"用户名",width:"180"}),(0,l.Wm)(p,{prop:"phoneNum",label:"手机号码",width:"180"}),(0,l.Wm)(p,{prop:"orgzName",label:"所在企业"}),(0,l.Wm)(p,{prop:"status",label:"帐号状态",width:"120"},{default:(0,l.w5)((t=>[(0,l._)("span",{class:(0,s.C_)("禁用"===t.row.status?"u-table-disabled":"u-table-normal")},(0,s.zw)(t.row.status),3)])),_:1}),(0,l.Wm)(p,{prop:"updateAt",label:"最近登录",width:"240"}),(0,l.Wm)(p,{prop:"address",label:"操作",width:"240"},{default:(0,l.w5)((a=>[(0,l._)("div",i,[(0,l.Wm)(c,{link:"",type:"primary",size:"small",onClick:t=>r(a.row)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)("正常"==a.row.status?"停用":"启用"),1)])),_:2},1032,["onClick"]),(0,l.Wm)(d,{to:{path:`/${t.label}/details/${a.row.userId}`},class:"u-table-more"},{default:(0,l.w5)((()=>[u])),_:2},1032,["to"])])])),_:1})])),_:1},8,["data"])}}},p=e(3744);const c=(0,p.Z)(r,[["__scopeId","data-v-5f4c79d9"]]);var d=c,m=e(999),b=e(9996);const g={class:"v-customer"},w={class:"m-title"},f={class:"m-search-box"},h={class:"m-tips-content"},_=(0,l._)("span",{class:"u-title"},"是否启用/停用用户帐号",-1),v={class:"u-label"},U={class:"u-value"};var S={__name:"CustomerList",setup(t){const a=(0,n.t)(),{label:e,deepBerry:i}=a,{title:u,icon:r}=i[e],p={uid:"",placeholder:"请输入用户ID/用户姓名/手机号码/所在成员名称",status_title:"-- 用户帐号状态 --",status:[{label:"正常",value:0},{label:"已停用",value:1}]};let c=(0,o.qj)({loading:!1,table:[],pagination:{page:1,per:20,total:0},search:{input:null,status:null},form:{}});const S=(0,l.Fl)((()=>({pageIndex:c.pagination.page-1,pageSize:c.pagination.per,Condition:c.search.input,Status:c.search.status}))),W={};let k=(0,o.iH)("form"),z=(0,o.qj)({dialogVisible:!1,customer:W});function y({input_txt:t,status_id:a}){c.search.input=t,c.search.status=-1==a?null:a,c.pagination.page=1,N()}function C(t){c.pagination.page=t,N()}function D({row:t,type:a}){z.dialogVisible=!0,console.log(t),z.customer=t||W,k.value="close"==a?"tips":"form"}const j=()=>{z.dialogVisible=!1},I=()=>{const{userId:t,status:a}=z.customer,e="正常"==a?1:0,l=1==e?"启用":"停用";(0,m.lz)(t,e).then((()=>{z.dialogVisible=!1,N(),(0,b.bM)({title:"成功",message:`${l}成员成功`,type:"success"})}))};function N(){c.loading=!0,(0,m.wN)(S.value).then((t=>{if("200"==t.status){const a=t.data.data;c.table=a.datas,c.pagination.total=a.totalCount,console.log(c.table)}})).finally((()=>c.loading=!1))}return(0,l.bv)((()=>N())),(t,a)=>{const n=(0,l.up)("search-bar"),i=(0,l.up)("commonPagination"),m=(0,l.up)("tipsDialog"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("h2",w,[((0,l.wg)(),(0,l.j4)((0,l.LL)((0,o.SU)(r)),{class:"u-title-icon"})),(0,l.Uk)((0,s.zw)((0,o.SU)(u)),1)]),(0,l._)("div",f,[(0,l.Wm)(n,{data:p,onToSearch:y})]),(0,l.wy)((0,l.Wm)((0,o.SU)(d),{table:(0,o.SU)(c).table,label:(0,o.SU)(e),onToDialog:D},null,8,["table","label"]),[[b,(0,o.SU)(c).loading]]),(0,l.Wm)(i,{pagination:(0,o.SU)(c).pagination,onToParams:C},null,8,["pagination"]),(0,l.Wm)(m,{class:"m-tips","dialog-object":(0,o.SU)(z),onDialogClose:j,onDialogSuccess:I},{default:(0,l.w5)((()=>[(0,l._)("div",h,[_,(0,l._)("span",v,(0,s.zw)((0,o.SU)(z).customer.orgzName),1),(0,l._)("span",U,"("+(0,s.zw)((0,o.SU)(z).customer.phoneNum)+")",1)])])),_:1},8,["dialog-object"])])}}};const W=S;var k=W}}]);
//# sourceMappingURL=658.38ab9f10.js.map