"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[675],{999:function(t,a,e){e.d(a,{O3:function(){return n},lz:function(){return o},wN:function(){return s}});var l=e(6146);function s(t){return(0,l.u)().get("/api/User",{params:t})}function o(t,a){return(0,l.u)().put(`/api/User/${t}/enabled/${a}`)}function n(t){return(0,l.u)().get(`/api/User/${t}`)}},1675:function(t,a,e){e.r(a),e.d(a,{default:function(){return W}});var l=e(6252),s=e(2262),o=e(3577),n=e(4239);const i={class:"u-table-button"},u=(0,l.Uk)("查看详情 ");var r={__name:"customerTable",props:{table:Array,label:String},emits:["toDialog"],setup(t,{emit:a}){const e=t;let n=(0,s.qj)({data:[]});function r(t,e){a("toDialog",{row:t,type:e})}return(0,l.YP)(e,(t=>{n.data=t.table}),{deep:!0}),(a,e)=>{const p=(0,l.up)("el-table-column"),c=(0,l.up)("el-button"),d=(0,l.up)("router-link"),m=(0,l.up)("el-table");return(0,l.wg)(),(0,l.j4)(m,{class:"m-table",data:(0,s.SU)(n).data,border:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{prop:"userId",label:"用户ID",width:"120"}),(0,l.Wm)(p,{prop:"userName",label:"用户名",width:"180"}),(0,l.Wm)(p,{prop:"phoneNum",label:"手机号码",width:"180"}),(0,l.Wm)(p,{prop:"orgzName",label:"所在企业"}),(0,l.Wm)(p,{prop:"status",label:"帐号状态",width:"120"},{default:(0,l.w5)((t=>[(0,l._)("span",{class:(0,o.C_)("禁用"===t.row.status?"u-table-disabled":"u-table-normal")},(0,o.zw)(t.row.status),3)])),_:1}),(0,l.Wm)(p,{prop:"updateAt",label:"最近登录",width:"240"}),(0,l.Wm)(p,{prop:"address",label:"操作",width:"180"},{default:(0,l.w5)((a=>[(0,l._)("div",i,[(0,l.Wm)(c,{link:"",type:"primary",size:"small",onClick:t=>r(a.row)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)("正常"==a.row.status?"停用":"启用"),1)])),_:2},1032,["onClick"]),(0,l.Wm)(d,{to:{path:`/${t.label}/details/${a.row.userId}`},class:"u-table-more"},{default:(0,l.w5)((()=>[u])),_:2},1032,["to"])])])),_:1})])),_:1},8,["data"])}}},p=e(3744);const c=(0,p.Z)(r,[["__scopeId","data-v-3fd8cd84"]]);var d=c,m=e(999),b=e(9996);const g={class:"v-customer v-page"},w={class:"m-search-box"},f={class:"m-tips-content"},h=(0,l._)("span",{class:"u-title"},"是否启用/停用用户帐号",-1),_={class:"u-label"},v={class:"u-value"};var S={__name:"CustomerList",setup(t){const a=(0,n.t)(),{label:e}=a,i={uid:"",placeholder:"请输入用户ID/用户姓名/手机号码/所在成员名称",status_title:"-- 用户帐号状态 --",status:[{label:"正常",value:0},{label:"已停用",value:1}]};let u=(0,s.qj)({loading:!1,table:[],pagination:{page:1,per:20,total:0},search:{input:null,status:null},form:{}});const r=(0,l.Fl)((()=>({pageIndex:u.pagination.page-1,pageSize:u.pagination.per,Condition:u.search.input,Status:u.search.status}))),p={};let c=(0,s.iH)("form"),S=(0,s.qj)({dialogVisible:!1,customer:p});function U({input_txt:t,status_id:a}){u.search.input=t,u.search.status=-1==a?null:a,u.pagination.page=1,C()}function W(t){u.pagination.page=t,C()}function k({row:t,type:a}){S.dialogVisible=!0,S.customer=t||p,c.value="close"==a?"tips":"form"}const z=()=>{S.dialogVisible=!1},y=()=>{const{userId:t,status:a}=S.customer,e="正常"==a?1:0,l=1==e?"启用":"停用";(0,m.lz)(t,e).then((()=>{S.dialogVisible=!1,C(),(0,b.bM)({title:"成功",message:`${l}成员成功`,type:"success"})}))};function C(){u.loading=!0,(0,m.wN)(r.value).then((t=>{if("200"==t.status){const a=t.data.data;u.table=a.datas,u.pagination.total=a.totalCount}})).finally((()=>u.loading=!1))}return(0,l.bv)((()=>C())),(t,a)=>{const n=(0,l.up)("search-bar"),r=(0,l.up)("commonPagination"),p=(0,l.up)("tipsDialog"),c=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("div",w,[(0,l.Wm)(n,{data:i,onToSearch:U})]),(0,l.wy)((0,l.Wm)((0,s.SU)(d),{table:(0,s.SU)(u).table,label:(0,s.SU)(e),onToDialog:k},null,8,["table","label"]),[[c,(0,s.SU)(u).loading]]),(0,l.Wm)(r,{pagination:(0,s.SU)(u).pagination,onToParams:W},null,8,["pagination"]),(0,l.Wm)(p,{class:"m-tips","dialog-object":(0,s.SU)(S),onDialogClose:z,onDialogSuccess:y},{default:(0,l.w5)((()=>[(0,l._)("div",f,[h,(0,l._)("span",_,(0,o.zw)((0,s.SU)(S).customer.orgzName),1),(0,l._)("span",v,"("+(0,o.zw)((0,s.SU)(S).customer.phoneNum)+")",1)])])),_:1},8,["dialog-object"])])}}};const U=S;var W=U}}]);
//# sourceMappingURL=675.6e5f4c8f.js.map