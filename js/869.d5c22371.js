"use strict";(self["webpackChunkomp"]=self["webpackChunkomp"]||[]).push([[869],{7869:function(l,e,a){a.r(e),a.d(e,{default:function(){return O}});var i=a(6252),t=a(3577),o=a(2262);const d={key:0,class:"dialog-footer"},s={emits:["dialogClose","dialogSuccess"]};var n=Object.assign(s,{__name:"roleFormDialog",props:{dialogObject:Object},setup(l,{emit:e}){const a=l,s=(0,o.qj)({name:"",desc:""}),n=(0,i.Fl)({get(){return a.dialogObject.dialogVisible},set(l){return l}}),c={dialogTitle:a.dialogObject.title||"角色",dialogWidth:a.dialogObject.width||"760px",dialogCloseBtnText:a.dialogObject.closeBtnText||"取消",dialogSuccessBtnText:a.dialogObject.successBtnText||"成功",dialogIsFooter:a.dialogObject.isFooter||!0,dialogContent:a.dialogObject.content||"是否停用"},u=()=>{e("dialogClose",!1,"close")},r=()=>{e("dialogSuccess",!1,"success")};return(l,e)=>{const a=(0,i.up)("el-input"),m=(0,i.up)("el-form-item"),b=(0,i.up)("el-form"),g=(0,i.up)("el-button"),p=(0,i.up)("el-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(p,{modelValue:(0,o.SU)(n),"onUpdate:modelValue":e[2]||(e[2]=l=>(0,o.dq)(n)?n.value=l:null),title:c.dialogTitle,width:c.dialogWidth,"before-close":u,draggable:""},{footer:(0,i.w5)((()=>[c.dialogIsFooter?((0,i.wg)(),(0,i.iD)("span",d,[(0,i.Wm)(g,{onClick:u},{default:(0,i.w5)((()=>[(0,i.Uk)((0,t.zw)(c.dialogCloseBtnText),1)])),_:1}),(0,i.Wm)(g,{type:"primary",onClick:r},{default:(0,i.w5)((()=>[(0,i.Uk)((0,t.zw)(c.dialogSuccessBtnText),1)])),_:1})])):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"m-form-content",model:s,"label-width":"120px"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{label:"角色名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=l=>s.name=l)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(m,{label:"角色描述"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{modelValue:s.desc,"onUpdate:modelValue":e[1]||(e[1]=l=>s.desc=l),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title","width"])])}}});const c=n;var u=c;const r={class:"m-roles"},m=(0,i._)("h2",{class:"m-title"},"角色权限",-1),b={class:"m-content"},g=(0,i.Uk)(" + 新建角色 "),p={class:"u-label"},_={class:"u-button"},w=(0,i._)("span",null,"功能权限",-1),f=(0,i.Uk)("复制权限并新建角色"),h={class:"m-tree"},v={class:"custom-tree-node"},k={class:"u-button"},j=["onClick"],C=["onClick"],W={class:"m-button"},x=(0,i.Uk)("取消"),y=(0,i.Uk)("保存"),V=(0,i._)("div",{class:"m-tips-content"},[(0,i._)("span",{class:"u-title"},"角色还存在授权成员"),(0,i._)("span",{class:"u-title"},"请转移成员后再删除角色")],-1);var U={__name:"RolePermission",setup(l){let e=(0,o.iH)(""),a=(0,o.iH)("");(0,i.bv)((()=>{e.value=`${document.documentElement.clientHeight}`,a.value=e.value-84-120,window.onresize=function(){e.value=`${document.documentElement.clientHeight}`,a.value=e.value-84-120}}));const d=[{name:"管理员",role:"admin"},{name:"普通用户",role:"user"},{name:"技术人员",role:"programmer"},{name:"市场人员",role:"marketing"}],s=(0,o.iH)([{id:1,label:"客户管理",children:[{id:2,label:"查看客户列表"},{id:3,label:"企业开户"},{id:4,label:"停用企业账户"},{id:5,label:"启用账户"},{id:6,label:"查看客户详情",children:[{id:7,label:"修改客户信息"}]}]},{id:8,label:"用户管理",children:[{id:9,label:"查看用户列表"},{id:10,label:"停用用户帐号"},{id:11,label:"启用用户帐号"},{id:12,label:"查看用户详情"}]},{id:13,label:"设备管理",children:[{id:14,label:"查看设备列表"},{id:15,label:"添加设备信息"},{id:16,label:"删除设备信息"},{id:17,label:"查看设备详情",children:[{id:18,label:"修改设备信息"}]}]},{id:19,label:"设置",children:[{id:20,label:"当前帐号"},{id:21,label:"成员列表"},{id:22,label:"删除设备信息"},{id:23,label:"角色权限",children:[{id:24,label:"修改角色权限"}]}]}]);let n=1e3;const c=l=>{const e={id:n++,label:"新增",children:[]};l.children||(l.children=[]),l.children.push(e),s.value=[...s.value]},U=(l,e)=>{const a=l.parent,i=a.data.children||a.data,t=i.findIndex((l=>l.id===e.id));i.splice(t,1),s.value=[...s.value]},D=(0,o.iH)("tips");function O(l){S.dialogVisible=!0,D.value=l}const S=(0,o.qj)({dialogVisible:!1}),T=()=>{S.dialogVisible=!1},B=()=>{S.dialogVisible=!1};return(l,e)=>{const n=(0,i.up)("el-button"),H=(0,i.up)("Edit"),q=(0,i.up)("CloseBold"),z=(0,i.up)("el-tree"),F=(0,i.up)("tipsDialog");return(0,i.wg)(),(0,i.iD)("div",r,[m,(0,i._)("div",b,[(0,i._)("div",{class:"m-role",style:(0,t.j5)(`height: ${(0,o.SU)(a)}px`)},[(0,i.Wm)(n,{class:"u-add",type:"success",onClick:e[0]||(e[0]=l=>O("form"))},{default:(0,i.w5)((()=>[g])),_:1}),((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(d,((l,a)=>(0,i._)("div",{class:"u-row",key:a},[(0,i._)("span",p,(0,t.zw)(l.name),1),(0,i._)("div",_,[(0,i.Wm)(H,{class:"u-icon u-edit",onClick:e[1]||(e[1]=l=>O("form"))}),(0,i.Wm)(q,{class:"u-icon u-del",onClick:e[2]||(e[2]=l=>O("tips"))})])]))),64))],4),(0,i._)("div",{class:"m-user-role",style:(0,t.j5)(`height: ${(0,o.SU)(a)}px`)},[(0,i._)("h4",null,[w,(0,i.Wm)(n,{class:"u-add",type:"success"},{default:(0,i.w5)((()=>[f])),_:1})]),(0,i._)("div",h,[(0,i.Wm)(z,{data:s.value,"show-checkbox":"","node-key":"id","default-expand-all":""},{default:(0,i.w5)((({node:l,data:e})=>[(0,i._)("span",v,[(0,i._)("span",null,(0,t.zw)(l.label),1),(0,i._)("span",k,[(0,i._)("a",{class:"u-add",onClick:l=>c(e)}," 新增 ",8,j),(0,i._)("a",{class:"u-del",style:{"margin-left":"8px"},onClick:a=>U(l,e)}," 删除 ",8,C)])])])),_:1},8,["data"])]),(0,i._)("div",W,[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[x])),_:1}),(0,i.Wm)(n,{type:"primary"},{default:(0,i.w5)((()=>[y])),_:1})])],4)]),"tips"==D.value?((0,i.wg)(),(0,i.j4)(F,{key:0,class:"m-tips","dialog-object":S,onDialogClose:T,onDialogSuccess:B},{default:(0,i.w5)((()=>[V])),_:1},8,["dialog-object"])):(0,i.kq)("",!0),"form"==D.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(u),{key:1,class:"m-form","dialog-object":S,onDialogClose:T,onDialogSuccess:B},null,8,["dialog-object"])):(0,i.kq)("",!0)])}}};const D=U;var O=D}}]);
//# sourceMappingURL=869.d5c22371.js.map